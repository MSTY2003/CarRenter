"use strict";(self["webpackChunkcar"]=self["webpackChunkcar"]||[]).push([[359],{359:function(t,e,l){l.r(e),l.d(e,{default:function(){return k}});var a=l(3396),s=l(9242),n=l(7139);const r=t=>((0,a.dD)("data-v-0f73298d"),t=t(),(0,a.Cn)(),t),o={id:"app"},i={key:0,class:"modal"},u={class:"modal-content"},c=r((()=>(0,a._)("p",null,"你确定要租用这辆车吗？",-1))),d={class:"son"},h=r((()=>(0,a._)("i",{class:"fa fa-plus","aria-hidden":"true"},null,-1))),_=r((()=>(0,a._)("thead",null,[(0,a._)("tr",null,[(0,a._)("th"),(0,a._)("th",null,"序号"),(0,a._)("th",null,"车辆名称"),(0,a._)("th",null,"租赁价格"),(0,a._)("th",null,"车辆类型"),(0,a._)("th",null,"车辆描述"),(0,a._)("th",null,"车主"),(0,a._)("th",null,"车辆状态"),(0,a._)("th",null,"操作")])],-1))),p=r((()=>(0,a._)("td",null,[(0,a._)("input",{type:"checkbox"})],-1))),g=["onClick","disabled"];function w(t,e,l,r,w,m){return(0,a.wg)(),(0,a.iD)("div",o,[w.showRentModal?((0,a.wg)(),(0,a.iD)("div",i,[(0,a._)("div",u,[(0,a._)("span",{class:"close",onClick:e[0]||(e[0]=(...t)=>m.closeRentModal&&m.closeRentModal(...t))},"×"),c,(0,a._)("button",{onClick:e[1]||(e[1]=(...t)=>m.confirmRent&&m.confirmRent(...t))},"确认"),(0,a._)("button",{onClick:e[2]||(e[2]=(...t)=>m.closeRentModal&&m.closeRentModal(...t))},"取消")])])):(0,a.kq)("",!0),(0,a._)("div",d,[(0,a.wy)((0,a._)("input",{type:"text","onUpdate:modelValue":e[3]||(e[3]=t=>w.searchQuery=t),placeholder:"搜索..."},null,512),[[s.nr,w.searchQuery]]),(0,a._)("button",{onClick:e[4]||(e[4]=(...t)=>m.search&&m.search(...t))},"搜索"),(0,a._)("button",{style:{"background-color":"rgb(0, 255, 191)","margin-left":"700px"},onClick:e[5]||(e[5]=t=>m.add())},[h,(0,a.Uk)("租出车辆 ")]),(0,a._)("table",null,[_,(0,a._)("tbody",null,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(w.originalResults,((t,e)=>((0,a.wg)(),(0,a.iD)("tr",{key:e},[p,(0,a._)("td",null,(0,n.zw)(e+1),1),(0,a._)("td",null,(0,n.zw)(t.name),1),(0,a._)("td",null,(0,n.zw)(t.price),1),(0,a._)("td",null,(0,n.zw)(t.type),1),(0,a._)("td",null,(0,n.zw)(t.description),1),(0,a._)("td",null,(0,n.zw)(t.owner),1),(0,a._)("td",null,(0,n.zw)("AVAILABLE"===t.status?"未租出":"已租出"),1),(0,a._)("td",null,[(0,a._)("button",{class:"zy",onClick:t=>m.editItem(e),disabled:"AVAILABLE"!==t.status},(0,n.zw)("AVAILABLE"===t.status?"租用":"已租出"),9,g)])])))),128))])])])])}l(560);var m=l(1076),R={data(){return{userName:"",userID:"",searchQuery:"",originalResults:[],showRentModal:!1,rentIndex:null}},created(){this.userName=localStorage.getItem("userName"),this.userID=localStorage.getItem("userID"),console.log("userID:"+this.userID),this.updateData()},methods:{add(){this.$router.push("/main/addcar")},updateData(){m.Z.get("/car/getAllCars").then((t=>{this.originalResults=t.data.map((t=>({id:t.carID,name:t.carName,price:t.carPrice,type:t.carType,description:t.carDis,owner:t.carMaster,status:t.carState,renter:t.renter}))),console.log(this.originalResults)})).catch((t=>{console.error(t),console.log("error")}))},search(){this.searchQuery?this.originalResults=this.originalResults.filter((t=>t.name.includes(this.searchQuery)||t.price.toString().includes(this.searchQuery)||t.type.includes(this.searchQuery)||t.description.includes(this.searchQuery))):this.updateData()},editItem(t){this.rentIndex=t,this.showRentModal=!0},closeRentModal(){this.showRentModal=!1},confirmRent(){let t=`/car/updateCarRanter/${this.originalResults[this.rentIndex].id}/${this.userID}`;m.Z.put(t).then((t=>{console.log("租用成功: ",t.data),this.showRentModal=!1,updateData(),alert("租用成功！")})).catch((t=>{console.error("租用失败: ",t)}))}}},y=l(89);const I=(0,y.Z)(R,[["render",w],["__scopeId","data-v-0f73298d"]]);var k=I}}]);
//# sourceMappingURL=359.29cd444a.js.map