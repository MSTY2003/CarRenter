"use strict";(self["webpackChunkcar"]=self["webpackChunkcar"]||[]).push([[12],{5012:function(e,t,r){r.r(t),r.d(t,{default:function(){return z}});var l=r(3396),a=r(9242),c=r(7139);const s=e=>((0,l.dD)("data-v-5b168b06"),e=e(),(0,l.Cn)(),e),n={id:"app"},o={key:0,class:"modal"},i={class:"modal-content"},u=s((()=>(0,l._)("p",null,"你确定要删除这个车辆吗？",-1))),d={key:1,class:"modal"},h={class:"modal-content"},p=s((()=>(0,l._)("label",null,"车辆名称",-1))),m=s((()=>(0,l._)("label",null,"租赁价格",-1))),_=s((()=>(0,l._)("label",null,"车辆类型",-1))),w=s((()=>(0,l._)("label",null,"车辆描述",-1))),y=s((()=>(0,l._)("button",{type:"submit"},"更新",-1))),D={class:"son"},I=s((()=>(0,l._)("thead",null,[(0,l._)("tr",null,[(0,l._)("th"),(0,l._)("th",null,"序号"),(0,l._)("th",null,"车辆名称"),(0,l._)("th",null,"租赁价格"),(0,l._)("th",null,"车辆类型"),(0,l._)("th",null,"车辆描述"),(0,l._)("th",null,"车主"),(0,l._)("th",null,"车辆状态"),(0,l._)("th",null,"操作")])],-1))),b=s((()=>(0,l._)("td",null,[(0,l._)("input",{type:"checkbox"})],-1))),M=["onClick"],k=["onClick"];function C(e,t,r,s,C,v){return(0,l.wg)(),(0,l.iD)("div",n,[C.showDeleteModal?((0,l.wg)(),(0,l.iD)("div",o,[(0,l._)("div",i,[(0,l._)("span",{class:"close",onClick:t[0]||(t[0]=(...e)=>v.closeDeleteModal&&v.closeDeleteModal(...e))},"×"),u,(0,l._)("button",{onClick:t[1]||(t[1]=(...e)=>v.confirmDelete&&v.confirmDelete(...e))},"确认"),(0,l._)("button",{onClick:t[2]||(t[2]=(...e)=>v.closeDeleteModal&&v.closeDeleteModal(...e))},"取消")])])):(0,l.kq)("",!0),C.showModal?((0,l.wg)(),(0,l.iD)("div",d,[(0,l._)("div",h,[(0,l._)("span",{class:"close",onClick:t[3]||(t[3]=(...e)=>v.closeModal&&v.closeModal(...e))},"×"),(0,l._)("form",{onSubmit:t[8]||(t[8]=(0,a.iM)(((...e)=>v.updateItem&&v.updateItem(...e)),["prevent"]))},[p,(0,l.wy)((0,l._)("input",{type:"text","onUpdate:modelValue":t[4]||(t[4]=e=>C.currentItem.name=e),required:""},null,512),[[a.nr,C.currentItem.name]]),m,(0,l.wy)((0,l._)("input",{type:"text","onUpdate:modelValue":t[5]||(t[5]=e=>C.currentItem.price=e),required:""},null,512),[[a.nr,C.currentItem.price]]),_,(0,l.wy)((0,l._)("input",{type:"text","onUpdate:modelValue":t[6]||(t[6]=e=>C.currentItem.type=e),required:""},null,512),[[a.nr,C.currentItem.type]]),w,(0,l.wy)((0,l._)("textarea",{"onUpdate:modelValue":t[7]||(t[7]=e=>C.currentItem.description=e),required:""},null,512),[[a.nr,C.currentItem.description]]),y],32)])])):(0,l.kq)("",!0),(0,l._)("div",D,[(0,l.wy)((0,l._)("input",{type:"text","onUpdate:modelValue":t[9]||(t[9]=e=>C.searchQuery=e),placeholder:"搜索..."},null,512),[[a.nr,C.searchQuery]]),(0,l._)("button",{onClick:t[10]||(t[10]=(...e)=>v.search&&v.search(...e))},"搜索"),(0,l._)("table",null,[I,(0,l._)("tbody",null,[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(C.searchResults,((e,t)=>((0,l.wg)(),(0,l.iD)("tr",{key:t},[b,(0,l._)("td",null,(0,c.zw)(t+1),1),(0,l._)("td",null,(0,c.zw)(e.name),1),(0,l._)("td",null,(0,c.zw)(e.price),1),(0,l._)("td",null,(0,c.zw)(e.type),1),(0,l._)("td",null,(0,c.zw)(e.description),1),(0,l._)("td",null,(0,c.zw)(e.owner),1),(0,l._)("td",null,(0,c.zw)("AVAILABLE"===e.status?"未租出":"已租出"),1),(0,l._)("td",null,[(0,l._)("button",{onClick:e=>v.editItem(t)},"编辑",8,M),(0,l._)("button",{onClick:e=>v.deleteItem(t)},"删除",8,k)])])))),128))])])])])}var v=r(1076),f={data(){return{cars:[],searchResults:[],searchQuery:"",showModal:!1,currentItem:{},showDeleteModal:!1}},created(){this.updateData()},methods:{updateData(){v.Z.get("/car/getAllCars").then((e=>{this.cars=e.data,this.searchResults=this.cars.map((e=>({id:e.carID,name:e.carName,price:e.carPrice,type:e.carType,description:e.carDis,owner:e.carMaster,status:e.carState,renter:e.renter}))),console.log(this.searchResults)})).catch((e=>{console.error(e),console.log("error")}))},search(){this.searchQuery?this.searchResults=this.cars.filter((e=>e.carName.includes(this.searchQuery))).map((e=>({id:e.carID,name:e.carName,price:e.carPrice,type:e.carType,description:e.carDis,owner:e.carMaster,status:e.carState,renter:e.renter}))):this.searchResults=this.cars.map((e=>({id:e.carID,name:e.carName,price:e.carPrice,type:e.carType,description:e.carDis,owner:e.carMaster,status:e.carState,renter:e.renter})))},editItem(e){this.currentItem=Object.assign({},this.searchResults[e]),this.showModal=!0},closeModal(){this.showModal=!1},updateItem(){let e=`/car/modifyCar/${this.currentItem.id}`,t={carName:this.currentItem.name,rentalPrice:this.currentItem.price,carType:this.currentItem.type,carDescription:this.currentItem.description};v.Z.put(e,t).then((e=>{console.log("更新成功: ",e.data),this.showModal=!1,this.updateData()})).catch((e=>{console.error("更新失败: ",e)}))},deleteItem(e){this.currentItem=e,this.showDeleteModal=!0},closeDeleteModal(){this.showDeleteModal=!1},confirmDelete(){let e=`/car/removeCar/${this.searchResults[this.currentItem].id}`;v.Z.delete(e).then((e=>{console.log("删除成功: ",e.data),this.updateData(),this.showDeleteModal=!1})).catch((e=>{console.error("删除失败: ",e)}))}}},g=r(89);const R=(0,g.Z)(f,[["render",C],["__scopeId","data-v-5b168b06"]]);var z=R}}]);
//# sourceMappingURL=12.b1405aef.js.map